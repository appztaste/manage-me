var express=require("express"),app=express();app.set("port",process.env.PORT||8080),app.use(express["static"](__dirname)),app.get("/",function(a,b){b.render("index.html")}),app.listen(app.get("port"),function(){console.log("Node app is running on port",app.get("port"))});var manageMe=angular.module("manageMe",[]);manageMe.controller("taskController",["taskStorage","$scope",function(a,b){var c=this;c.taskStorage=a,b.tasks=a.tasks,c.checkTask=function(b){c.dateInvalid(b.date)||(c.resetValidation(),a.addTask(b))},c.resetValidation=function(){b.invalidDateFormatting=!1,b.pastDate=!1},c.dateInvalid=function(a){return moment(new Date(a)).isValid()?new Date>new Date(a)?(b.pastDate=!0,!0):void 0:(b.invalidDateFormatting=!0,!0)}}]),manageMe.directive("task",function(){return{restrict:"E",templateUrl:"task.html"}}),manageMe.factory("taskFetcher",["$http",function(a){return{fetchTasks:function(){var b="https://s3-eu-west-1.amazonaws.com/appointedd-assets/tasks.json";return a.get(b)}}}]),manageMe.service("taskStorage",["taskFetcher",function(a){var b=this;b.tasks=[],b.fetchTasks=function(){var c=a.fetchTasks();c.then(function(a){a.data.tasks.forEach(function(a){var c={description:a.description,date:a.due_date};b.addTask(c)})})},b.fetchTasks(),b.addTask=function(a){var c={};c.description=a.description,c.date=a.date,c.humanizedDate=b.humanize(a.date),b.idCounter+=1,c.id=b.idCounter,b.tasks.push(c)},b.deleteTask=function(a){var c=b.tasks.indexOf(a);c>-1&&b.tasks.splice(c,1)},b.humanize=function(a){return moment(new Date(a)).fromNow()}}]);